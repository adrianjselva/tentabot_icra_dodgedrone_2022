<launch>

  <arg name="sim_flag" default="false" />
  <arg name="rviz_flag" default="false" />
  <arg name="map_utility_flag" default="false" />
  <arg name="tentabot_server_flag" default="true" />


  <arg name="config_task_name" default="config_task_nav_kingfisher"/>
  <arg name="config_map_utility"  default="config_map_utility_kingfisher" />
  <arg name="config_tentabot_server" default="config_tentabot_server_kingfisher"/>

  <param name="sim_flag"                          value="$(arg sim_flag)" />
  <param name="rviz_flag"                         value="$(arg rviz_flag)" />
  <param name="map_utility_flag"                  value="$(arg map_utility_flag)" />
  <param name="tentabot_server_flag"              value="$(arg tentabot_server_flag)" />
  <rosparam file="$(find tentabot)/config/task_nav/$(arg config_task_name).yaml" />
  <param name="config_map_utility"                value="$(arg config_map_utility)" />
  <param name="config_tentabot_server"            value="$(arg config_tentabot_server)" />

  <node name="icra_dodgedrone_wrapper" pkg="tentabot" type="icra_dodgedrone_wrapper" output="screen" />

<!-- RUN TENTABOT HEURISTIC FRAMEWORK -->
<!--  <node name="tentabot_framework_launch" pkg="tentabot" type="tentabot_framework_launch.py" output="screen" />-->
  <!-- <node pkg="nodelet" type="nodelet" name="pcl_manager" args="manager" output="screen" />

    Run a passthrough filter to clean NaNs
    <node pkg="nodelet" type="nodelet" name="passthrough" args="load pcl/PassThrough pcl_manager" output="screen">
      <remap from="~input" to="/kingfisher/pointcloud" />
      <remap from="~output" to="/kingfisher/pointcloud/filtered" />
      <rosparam>
        filter_field_name: z
        filter_limit_min: 0.01
        filter_limit_max: 10
        filter_limit_negative: False
      </rosparam>
    </node> -->

<!--     <node pkg="nodelet" type="nodelet" name="y_passthrough" args="load pcl/PassThrough pcl_manager" output="screen"> -->
<!--           <remap from="~input" to="/kingfisher/pointcloud/z_filter" /> -->
<!--           <remap from="~output" to="/kingfisher/pointcloud/y_filter" /> -->
<!--           <rosparam> -->
<!--             filter_field_name: y -->
<!--             filter_limit_min: -10 -->
<!--             filter_limit_max: 10 -->
<!--             filter_limit_negative: False -->
<!--           </rosparam> -->
<!--         </node> -->

<!--          <node pkg="nodelet" type="nodelet" name="passthrough" args="load pcl/PassThrough pcl_manager" output="screen"> -->
<!--                   <remap from="~input" to="/kingfisher/pointcloud/y_filter" /> -->
<!--                   <rosparam> -->
<!--                     filter_field_name: x -->
<!--                     filter_limit_min: -10 -->
<!--                     filter_limit_max: 10 -->
<!--                     filter_limit_negative: False -->
<!--                   </rosparam> -->
<!--                 </node> -->
 

</launch>